# "Chlamydia",
# "Parasites_Scabies",
# "Meningitis",
# "Zika_Virus",
# "Hepatitis",
# "Giardiasis",
# "Takatsubo_Cardiomyopathy",
# "Flu",
# "Obesity",
# "Latex_allergies",
# "Lice",
# "Legionellosis",
# "Lymphocytic_Choriomeningitis",
# "Tetanus",
# "Ticks_Lyme_Disease",
# "Tuburculosis",
# "Trench_fever",
# "Creutzfeldt-Jakob_Disease",
"Hearing_loss")
claims_data <-
data.frame(disease = sample(diseases, 30, replace = TRUE),
patient = rep_len(1:10, 30), stringsAsFactors = FALSE)
# Chunk 5: splitit
claims_tx <- split(claims_data$patient, claims_data$disease)
# Chunk 6: add_association
claims_tx$Hypertension <- c(claims_tx$Hypertension, 1:3)
claims_tx$Kidney_disease <- c(claims_tx$Kidney_disease, 1:3)
# Chunk 7: make_tidlists
claims_tx <- lapply(claims_tx, function(x) sort(unique(x)))
claims_tx <- as(claims_tx, "tidLists")
# Chunk 8: claims_out
claims_tx
# Chunk 9: claims_inspect
claims_inspect <- inspect(claims_tx)
# Chunk 10: display_claims_inspect
pander::pander(claims_inspect)
# Chunk 11: tid_methods
methods(class = "tidLists")
# Chunk 12: image_claims
image(claims_tx)
# Chunk 13: apriori
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 2))
claims_rules_measures <- interestMeasure(x = claims_rules,
measure = c("chiSquared", "FishersExactTest", "oddsRatio"),
transactions = claims_tx)
claims_rules_measures <- cbind(as(claims_rules, "data.frame"), claims_rules_measures)
claims_rules_measures$rules <- as.character(claims_rules_measures$rules)
claims_rules_measures <-
claims_rules_measures %>%
separate(col = "rules",
into = c("First_disease", "Second_disease"),
sep = "\\=\\>",
extra = "drop")
claims_rules_measures$First_disease <-
str_replace_all(string = claims_rules_measures$First_disease, pattern = "\\{|\\}", replacement = "")
claims_rules_measures$Second_disease <-
str_replace_all(string = claims_rules_measures$Second_disease, pattern = "\\{|\\}", replacement = "")
claims_network <-
network(x = cbind(claims_rules_measures$First_disease, claims_rules_measures$Second_disease))
plot(claims_network)
library(ggnetwork)
library(igraph)
claims_igraph <- graph.data.frame(d = claims_rules_measures %>% select(First_disease, Second_disease, oddsRatio))
plot(claims_igraph, edge.arrow.size = 0.04)
class(claims_igraph)
methods(class = "igraph")
claims_ggnetwork <- ggnetwork(claims_igraph)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
library(viridis)
methods(class = "rules")
claims_ggnetwork <- ggnetwork(claims_igraph)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
library(intergraph)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
library(ggnetwork)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
claims_ggnetwork <-
ggplot(ggnetwork(claims_igraph), aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
plot(claims_igraph, edge.arrow.size = 0.04)
plot(claims_igraph, edge.arrow.size = 0.04)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2: libraries
library(arules)
library(arulesViz)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
library(statnet)
library(ggnetwork)
# Chunk 3: set_seed
set.seed(9001)
# Chunk 4: sim_data
diseases <-
c("Heart_disease",
"Hypertension",
"Kidney_disease",
"Liver_cirrhosis",
"Gall_stones",
"Kidney_stones",
"Tonsiliths",
"Unspecified_cancer",
"Vitamin_D_deficiency",
"Trichtillomania",
# "Psoriasis",
# "Esophagitis",
# "Otitis_media",
# "Ingrown_toenail",
# "ADHD",
# "Arthritis",
# "Chlamydia",
# "Parasites_Scabies",
# "Meningitis",
# "Zika_Virus",
# "Hepatitis",
# "Giardiasis",
# "Takatsubo_Cardiomyopathy",
# "Flu",
# "Obesity",
# "Latex_allergies",
# "Lice",
# "Legionellosis",
# "Lymphocytic_Choriomeningitis",
# "Tetanus",
# "Ticks_Lyme_Disease",
# "Tuburculosis",
# "Trench_fever",
# "Creutzfeldt-Jakob_Disease",
"Hearing_loss")
claims_data <-
data.frame(disease = sample(diseases, 30, replace = TRUE),
patient = rep_len(1:10, 30), stringsAsFactors = FALSE)
# Chunk 5: splitit
claims_tx <- split(claims_data$patient, claims_data$disease)
# Chunk 6: add_association
claims_tx$Hypertension <- c(claims_tx$Hypertension, 1:3)
claims_tx$Kidney_disease <- c(claims_tx$Kidney_disease, 1:3)
# Chunk 7: make_tidlists
claims_tx <- lapply(claims_tx, function(x) sort(unique(x)))
claims_tx <- as(claims_tx, "tidLists")
# Chunk 8: claims_out
claims_tx
# Chunk 9: claims_inspect
claims_inspect <- inspect(claims_tx)
# Chunk 10: display_claims_inspect
pander::pander(claims_inspect)
# Chunk 11: tid_methods
methods(class = "tidLists")
# Chunk 12: image_claims
image(claims_tx)
# Chunk 13: apriori
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 2))
# Chunk 14: interests
claims_rules_measures <- interestMeasure(x = claims_rules,
measure = c("chiSquared", "FishersExactTest", "oddsRatio"),
transactions = claims_tx)
claims_rules_measures <- cbind(as(claims_rules, "data.frame"), claims_rules_measures)
# Chunk 15: munge_interests
claims_rules_measures$rules <- as.character(claims_rules_measures$rules)
claims_rules_measures <-
claims_rules_measures %>%
separate(col = "rules",
into = c("First_disease", "Second_disease"),
sep = "\\=\\>",
extra = "drop")
claims_rules_measures$First_disease <-
str_replace_all(string = claims_rules_measures$First_disease, pattern = "\\{|\\}", replacement = "")
claims_rules_measures$Second_disease <-
str_replace_all(string = claims_rules_measures$Second_disease, pattern = "\\{|\\}", replacement = "")
claims_network <-
network(x = cbind(claims_rules_measures$First_disease, claims_rules_measures$Second_disease))
# Chunk 16: claims_viz
plot(claims_network)
# Chunk 17: gg_claims
library(ggnetwork)
library(igraph)
claims_igraph <- graph.data.frame(d = claims_rules_measures %>% select(First_disease, Second_disease, oddsRatio))
plot(claims_igraph, edge.arrow.size = 0.04)
class(claims_igraph)
methods(class = "igraph")
library(viridis)
claims_ggnetwork <- ggnetwork(claims_igraph)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
claims_ggnetwork <- ggnetwork(claims_igraph)
claims_ggnetwork <-
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend, col = )) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2: libraries
library(arules)
library(arulesViz)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
library(statnet)
library(ggnetwork)
# Chunk 3: set_seed
set.seed(9001)
# Chunk 4: sim_data
diseases <-
c("Heart_disease",
"Hypertension",
"Kidney_disease",
"Liver_cirrhosis",
"Gall_stones",
"Kidney_stones",
"Tonsiliths",
"Unspecified_cancer",
"Vitamin_D_deficiency",
"Trichtillomania",
# "Psoriasis",
# "Esophagitis",
# "Otitis_media",
# "Ingrown_toenail",
# "ADHD",
# "Arthritis",
# "Chlamydia",
# "Parasites_Scabies",
# "Meningitis",
# "Zika_Virus",
# "Hepatitis",
# "Giardiasis",
# "Takatsubo_Cardiomyopathy",
# "Flu",
# "Obesity",
# "Latex_allergies",
# "Lice",
# "Legionellosis",
# "Lymphocytic_Choriomeningitis",
# "Tetanus",
# "Ticks_Lyme_Disease",
# "Tuburculosis",
# "Trench_fever",
# "Creutzfeldt-Jakob_Disease",
"Hearing_loss")
claims_data <-
data.frame(disease = sample(diseases, 30, replace = TRUE),
patient = rep_len(1:10, 30), stringsAsFactors = FALSE)
# Chunk 5: splitit
claims_tx <- split(claims_data$patient, claims_data$disease)
# Chunk 6: add_association
claims_tx$Hypertension <- c(claims_tx$Hypertension, 1:3)
claims_tx$Kidney_disease <- c(claims_tx$Kidney_disease, 1:3)
# Chunk 7: make_tidlists
claims_tx <- lapply(claims_tx, function(x) sort(unique(x)))
claims_tx <- as(claims_tx, "tidLists")
# Chunk 8: claims_out
claims_tx
# Chunk 9: claims_inspect
claims_inspect <- inspect(claims_tx)
# Chunk 10: display_claims_inspect
pander::pander(claims_inspect)
# Chunk 11: tid_methods
methods(class = "tidLists")
# Chunk 12: image_claims
image(claims_tx)
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.1, confidence = 0.1, maxlen = 2))
claims_tx
inspect(claims_tx)
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2: libraries
library(arules)
library(arulesViz)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
library(statnet)
library(ggnetwork)
# Chunk 3: set_seed
set.seed(9001)
# Chunk 4: sim_data
diseases <-
c("Heart_disease",
"Hypertension",
"Kidney_disease",
"Liver_cirrhosis",
"Gall_stones",
"Kidney_stones",
"Tonsiliths",
"Unspecified_cancer",
"Vitamin_D_deficiency",
"Trichtillomania",
# "Psoriasis",
# "Esophagitis",
# "Otitis_media",
# "Ingrown_toenail",
# "ADHD",
# "Arthritis",
# "Chlamydia",
# "Parasites_Scabies",
# "Meningitis",
# "Zika_Virus",
# "Hepatitis",
# "Giardiasis",
# "Takatsubo_Cardiomyopathy",
# "Flu",
# "Obesity",
# "Latex_allergies",
# "Lice",
# "Legionellosis",
# "Lymphocytic_Choriomeningitis",
# "Tetanus",
# "Ticks_Lyme_Disease",
# "Tuburculosis",
# "Trench_fever",
# "Creutzfeldt-Jakob_Disease",
"Hearing_loss")
claims_data <-
data.frame(disease = sample(diseases, 10, replace = TRUE),
patient = rep_len(1:5, 10), stringsAsFactors = FALSE)
# Chunk 5: splitit
claims_tx <- split(claims_data$patient, claims_data$disease)
# Chunk 6: add_association
claims_tx$Hypertension <- c(claims_tx$Hypertension, 1:3)
claims_tx$Kidney_disease <- c(claims_tx$Kidney_disease, 1:3)
claims_tx$Heart_disease <- c(claims_tx$Heart_disease, 1:3)
# Chunk 7: make_tidlists
claims_tx <- lapply(claims_tx, function(x) sort(unique(x)))
claims_tx <- as(claims_tx, "tidLists")
# Chunk 8: claims_out
claims_tx
# Chunk 9: claims_inspect
claims_inspect <- inspect(claims_tx)
# Chunk 10: display_claims_inspect
pander::pander(claims_inspect)
# Chunk 11: tid_methods
methods(class = "tidLists")
# Chunk 12: image_claims
image(claims_tx)
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 2))
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 3))
claims_data
# Chunk 1: setup
knitr::opts_chunk$set(echo = TRUE)
# Chunk 2: libraries
library(arules)
library(arulesViz)
library(dplyr)
library(ggplot2)
library(tidyr)
library(stringr)
library(statnet)
library(ggnetwork)
# Chunk 3: set_seed
set.seed(9001)
# Chunk 4: sim_data
diseases <-
c("Heart_disease",
"Hypertension",
"Kidney_disease",
"Liver_cirrhosis",
"Gall_stones",
"Kidney_stones",
"Tonsiliths",
"Unspecified_cancer",
"Vitamin_D_deficiency",
"Trichtillomania",
# "Psoriasis",
# "Esophagitis",
# "Otitis_media",
# "Ingrown_toenail",
# "ADHD",
# "Arthritis",
# "Chlamydia",
# "Parasites_Scabies",
# "Meningitis",
# "Zika_Virus",
# "Hepatitis",
# "Giardiasis",
# "Takatsubo_Cardiomyopathy",
# "Flu",
# "Obesity",
# "Latex_allergies",
# "Lice",
# "Legionellosis",
# "Lymphocytic_Choriomeningitis",
# "Tetanus",
# "Ticks_Lyme_Disease",
# "Tuburculosis",
# "Trench_fever",
# "Creutzfeldt-Jakob_Disease",
"Hearing_loss")
claims_data <-
data.frame(disease = sample(diseases, 20, replace = TRUE),
patient = rep_len(1:5, 20), stringsAsFactors = FALSE)
# Chunk 5: splitit
claims_tx <- split(claims_data$patient, claims_data$disease)
# Chunk 6: add_association
claims_tx$Hypertension <- c(claims_tx$Hypertension, 1:3)
claims_tx$Kidney_disease <- c(claims_tx$Kidney_disease, 1:3)
claims_tx$Heart_disease <- c(claims_tx$Heart_disease, 1:3)
# Chunk 7: make_tidlists
claims_tx <- lapply(claims_tx, function(x) sort(unique(x)))
claims_tx <- as(claims_tx, "tidLists")
# Chunk 8: claims_out
claims_tx
# Chunk 9: claims_inspect
claims_inspect <- inspect(claims_tx)
# Chunk 10: display_claims_inspect
pander::pander(claims_inspect)
# Chunk 11: tid_methods
methods(class = "tidLists")
# Chunk 12: image_claims
image(claims_tx)
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 3))
plot(claims_rules, method = "graph", control = list(type = "items"))
claims_rules <-
apriori(claims_tx, parameter = list(support = 0.01, confidence = 0.1, maxlen = 2))
plot(claims_rules, method = "graph", control = list(type = "items"))
as(claims_rules, "data.frame")
library(igraph)
claims_igraph <- graph.data.frame(d = claims_rules_measures %>% select(First_disease, Second_disease, oddsRatio))
plot(claims_igraph, edge.arrow.size = 0.04)
class(claims_igraph)
methods(class = "igraph")
library(ggnetwork)
library(viridis)
methods(class = "rules")
claims_ggnetwork <- ggnetwork(claims_network)
claims_rules_measures <- interestMeasure(x = claims_rules,
measure = c("chiSquared", "FishersExactTest", "oddsRatio"),
transactions = claims_tx)
claims_rules_measures <-
cbind(as(claims_rules, "data.frame"), claims_rules_measures)
claims_rules_measures$rules <- as.character(claims_rules_measures$rules)
claims_rules_measures <-
claims_rules_measures %>%
separate(col = "rules",
into = c("First_disease", "Second_disease"),
sep = "\\=\\>",
extra = "drop")
claims_rules_measures$First_disease <-
str_replace_all(string = claims_rules_measures$First_disease, pattern = "\\{|\\}", replacement = "")
claims_rules_measures$Second_disease <-
str_replace_all(string = claims_rules_measures$Second_disease, pattern = "\\{|\\}", replacement = "")
claims_rules_measures <-
claims_rules_measures %>% filter(First_disease != " ")
claims_rules_measures <-
claims_rules_measures[rep_len(c(TRUE, FALSE), nrow(claims_rules_measures)),]
claims_network <-
network(x = cbind(claims_rules_measures$First_disease, claims_rules_measures$Second_disease), directed = TRUE)
plot(claims_network)
library(igraph)
claims_igraph <- graph.data.frame(d = claims_rules_measures %>% select(First_disease, Second_disease, oddsRatio))
plot(claims_igraph, edge.arrow.size = 0.04)
class(claims_igraph)
methods(class = "igraph")
library(ggnetwork)
library(viridis)
methods(class = "rules")
claims_ggnetwork <- ggnetwork(claims_network)
claims_ggnetwork$vertex.names <- as.character(claims_ggnetwork$vertex.names)
ggplot(claims_ggnetwork, aes()) +
geom_segment(aes(x = x, y = y, xend = xend, yend = yend)) +
geom_point(aes(x, y, col = vertex.names), size = 10) +
scale_color_viridis(discrete = TRUE) +
theme(legend.position = "right")
install.packages("arules", "arulesViz", "arulesSequences")
Version()
R.Version()
install.packages("arules")
install.packages("arulesViz")
install.packages("statnet")
install.packages("ggnetwork")
install.packages("viridis")
??quietly
